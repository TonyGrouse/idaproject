"use strict";window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("body"),t=document.querySelector(".products__cards"),i=()=>{e.clientWidth>1406?s.length<3?t.style.cssText="\n                    grid-template-columns: repeat(auto-fit, minmax(300px, 332px));\n                ":t.style.cssText="\n                    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n                ":e.clientWidth<1406&&e.clientWidth>991.98?s.length<2?t.style.cssText="\n                    grid-template-columns: repeat(auto-fit, minmax(300px, 319px));\n                ":t.style.cssText="\n                    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n                ":e.clientWidth<991.98&&e.clientWidth>540&&(s.length<2?t.style.cssText="\n                    grid-template-columns: repeat(auto-fit, 220px);\n                ":t.style.cssText="\n                    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\n                ")};sessionStorage.getItem("is_reloaded")&&setTimeout(()=>{i()},10);const n=[{name:"Macbook",description:"компьютер apple",link:"\n                https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/mbp16-spacegray-gallery5-202110?wid=2000&hei=1536&fmt=jpeg&qlt=95&.v=1632799183000\n            ",price:"500000"},{name:"Ipad",description:"Планшет apple",link:"\n                https://www.duchuymobile.com/images/news/42/ipad-pro-2021.JPG\n            ",price:"100000"},{name:"Путевка на водопад",description:"Испытайте не себе величие природы",link:"\n                https://nikonpro.ru/sites/default/files/uploaded/plato_putorana_23901_0.jpg\n            ",price:"50000"}];localStorage.getItem("cards")||localStorage.setItem("cards",JSON.stringify(n));class r{constructor(e,t,i,n,r){this.name=e,this.description=t,this.link=i,this.price=n.replace(/\D/gi,"").replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),this.id=r}render(){const e=document.createElement("div");e.classList.add("products__card","card"),e.setAttribute("data-id",this.id),e.innerHTML=`\n                <div class="card__trash">\n                    <img src="img/trash.png" alt="Корзина">\n                </div>\n                <div class="card__item">\n                    <div class="card__img">\n                        <img src=${this.link}\n                            alt=${this.name}>\n                    </div>\n                    <div class="card__text">\n                        <div class="card__title">\n                            <h3>${this.name}</h3>\n                        </div>\n                        <div class="card__descr">\n                            <p>${this.description}</p>\n                        </div>\n                        <div class="card__price">\n                            <h2>${this.price} руб.</h2>\n                        </div>\n                    </div>\n                </div>\n            `,t.append(e)}}const a=JSON.parse(localStorage.getItem("cards"));a.forEach(({name:e,description:t,link:i,price:n,id:a},s)=>{new r(e,t,i,n,s).render()});let s=[...t.childNodes].filter(e=>"DIV"===e.nodeName);const c=e=>{const n=s.findIndex(t=>+t.getAttribute("data-id")===e);s.splice(n,1),l.splice(e,1);t.innerHTML="",t.append(...s),i(),a.splice(e,1),localStorage.setItem("cards",JSON.stringify(a))},l=[...document.querySelectorAll(".card__trash")];l.forEach((e,t)=>{e.addEventListener("click",()=>{c(t)})});const d=document.querySelector(".form"),o=d.querySelectorAll(".form input"),p=d.querySelector(".form textarea"),m=d.querySelector(".form button"),u={name:"",description:"",link:"",price:""},h=()=>{for(const e of o)if(""===e.value)return void m.classList.add("disabled");m.classList.remove("disabled")};o.forEach(e=>{e.addEventListener("input",()=>{"name"===e.name?u.name=e.value:"link"===e.name?u.link=e.value:"price"===e.name&&(e.value=e.value.replace(/\D/gi,"").replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),u.price=e.value)}),e.onkeydown=e.onkeyup=e.onkeypress=e.change=h}),p.addEventListener("input",()=>{u.description=p.value});d.addEventListener("submit",e=>{e.preventDefault(),o.forEach(e=>{""===e.value?(e.classList.add("req"),d.classList.add("req")):(e.classList.remove("req"),d.classList.remove("req"))}),d.classList.contains("req")||(m.classList.add("disabled"),(({name:e,description:n,link:d,price:o})=>{const p=l.length;new r(e,n,d,o,p).render();let m=document.querySelectorAll(".card__trash");m=m[m.length-1],m.addEventListener("click",()=>{c(p)}),s=[...t.childNodes].filter(e=>"DIV"===e.nodeName),i(),a.push(u),localStorage.setItem("cards",JSON.stringify(a))})(u),d.reset())});const g=document.querySelector("#filter"),v=g.querySelector("#filter p"),f=g.querySelectorAll("#filter li");g.addEventListener("click",e=>{e.target&&"P"===e.target.tagName&&v.classList.toggle("active")});const L=e=>{v.innerHTML=""+e.innerHTML},x=e=>{const i=[...s];i.sort((t,i)=>{const n=+t.children[1].children[1].children[2].innerText.replace(/\D/gi,""),r=+i.children[1].children[1].children[2].innerText.replace(/\D/gi,"");return"min"===e?n-r:r-n}),t.innerHTML="",t.append(...i)};f.forEach(e=>{e.addEventListener("click",()=>{f.forEach(e=>{e.classList.remove("active")}),e.classList.add("active"),"min"===e.getAttribute("value")||"max"===e.getAttribute("value")?(L(e),x(e.getAttribute("value"))):"name"===e.getAttribute("value")?(L(e),(()=>{const e=[...s];e.sort((e,t)=>e.children[1].children[1].children[0].innerText.toLowerCase()<t.children[1].children[1].children[0].innerText.toLowerCase()?-1:1),t.innerHTML="",t.append(...e)})()):"default"===e.getAttribute("value")&&(L(e),t.innerHTML="",t.append(...s))})})});